<!DOCTYPE html>
<template id="game-character"> 
  <style>
    :host {
      display: block;
    }
    ::slotted(pixels) {
      display: none;
    }
  </style>
  <h2>Hello World!!</h2>
  <!-- a placeholder for your mario pixels -->
  <slot></slot>
</template>
<script>
  const doc = (document.currentScript.ownerDocument || document.currentScript._ownerDocument);
  /**
    * `game-character`
    * A CSS game character
    *
    * @customElement
    * @demo demo/index.html
    */
  class GameCharacter extends HTMLElement {
    static get is() { return 'game-character'; }
    static get template() {
      const tmpl = doc.querySelector("#game-character");
      return tmpl.content.cloneNode(true);
    }
    /**
    * Default colour mapping hash
    */
    static get DefaultColourMap() {
      return {
        "r": "#f00",
        "w": "#fff",
        "k": "#000",
        "o": "transparent",
        "t": "#83401f",
        "p": "#ffbc77",
        "b": "#06f",
        "y": "#ff0",
        "n": "#ff8000",
        "g": "#5ac528"
      };
    }
    /**
     * @constructor
     */
    constructor() {
      super();
      this.attachShadow({mode: 'open'});
      this.shadowRoot.appendChild(GameCharacter.template);
    }

    /**
      * whenever comonent is attached to the dom
      * scan content of pixels slot
      * to retrieve pixel art definition added by user
      */
    connectedCallback() {
      const nodes = this.shadowRoot.querySelector('slot')
        .assignedNodes({flatten: true});
      const pixels = nodes
        .filter(node => node.tagName === 'PIXELS')[0];
      if(!pixels) {
        console.warn('Cannot find pixel art definition!');
        return;
      }
      const pixelArray = [];
      const pixelData = pixels.textContent;
      const pattern =  /\(([rwkotpbyng\s]+?)\)/gi;
      // regex matching and data split
      var match = pattern.exec(pixelData);
      while(match !== null) {
          pixelArray.push((match[1].split(' ')));
          match = pattern.exec(pixelData);
      }
      
    }

  }
  customElements.define(GameCharacter.is, GameCharacter);
</script>
